# =============================================================================
# MyBMAD Dashboard — Environment Variables
# =============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# Or use the setup script to auto-generate secrets:
#   bash scripts/setup.sh
#
# Never commit .env or .env.local to version control.
# =============================================================================

# --- Database ---
# PostgreSQL connection string.
# If using the included docker-compose.yml, the default below works out of the box.
# Format: postgresql://<user>:<password>@<host>:<port>/<database>
DATABASE_URL=postgresql://bmad:bmad_dev_password@localhost:5433/bmad_dashboard

# --- Authentication (Better Auth) ---
# Random secret used to sign session tokens. Must be a long random string.
# Generate with:  openssl rand -base64 32
BETTER_AUTH_SECRET=

# Base URL where the app is running.
# For local development, use http://localhost:3000
BETTER_AUTH_URL=http://localhost:3000

# --- GitHub OAuth App ---
# Required for "Login with GitHub". Create an OAuth App at:
#   https://github.com/settings/developers → "New OAuth App"
#
#   Application name:         MyBMAD (or anything you like)
#   Homepage URL:             http://localhost:3000
#   Authorization callback:   http://localhost:3000/api/auth/callback/github
#
# After creating the app, copy the Client ID and generate a Client Secret.
GITHUB_CLIENT_ID=
GITHUB_CLIENT_SECRET=

# --- GitHub Personal Access Token (optional) ---
# Without a PAT, GitHub API allows 60 requests/hour.
# With a PAT, you get 5,000 requests/hour — highly recommended.
#
# Create one at: https://github.com/settings/tokens → "Generate new token (classic)"
# Required scopes:
#   - "public_repo" for public repositories only
#   - "repo"        for private repositories
GITHUB_PAT=

# --- Cache Revalidation ---
# Random secret to protect the /api/revalidate endpoint.
# Generate with:  openssl rand -hex 32
REVALIDATE_SECRET=

# --- Session (optional, defaults shown) ---
# SESSION_EXPIRES_IN=604800  # 7 days in seconds
# SESSION_UPDATE_AGE=86400   # 1 day in seconds

# =============================================================================
# PRODUCTION DEPLOYMENT (docker/docker-compose.prod.yml)
# =============================================================================
# In production, TWO environment files are used:
#
# .env         — Docker Compose interpolation (parse time)
#   Variables used by Docker Compose: DOMAIN, ACME_EMAIL, POSTGRES_*
#
# .env.local   — Runtime variables injected into the Next.js container
#   Contains: BETTER_AUTH_SECRET, BETTER_AUTH_URL, GITHUB_CLIENT_ID,
#             GITHUB_CLIENT_SECRET, DATABASE_URL (production)
#   (Copy the top variables from this file into .env.local with production values)
# =============================================================================

# Domain for Traefik routing and Let's Encrypt certificates
# DOMAIN=yourdomain.example.com

# Email for Let's Encrypt certificate notifications
# ACME_EMAIL=admin@example.com

# PostgreSQL credentials (used by both the postgres service AND DATABASE_URL)
# POSTGRES_DB=bmad_dashboard
# POSTGRES_USER=bmad
# POSTGRES_PASSWORD=change_me_in_production

# Production DATABASE_URL (uses internal Docker network, port 5432)
# DATABASE_URL=postgresql://bmad:change_me_in_production@postgres:5432/bmad_dashboard

# BETTER_AUTH_URL must match your production domain
# BETTER_AUTH_URL=https://yourdomain.example.com
